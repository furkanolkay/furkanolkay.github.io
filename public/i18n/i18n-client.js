// Translations
const translations = {
  en: {
    nav: {
      home: "Home",
      about: "About",
      experience: "Experience",
      skills: "Skills",
      projects: "Projects",
      contact: "Get in Touch",
    },
    hero: {
      badge: "5+ Years Experienced Flutter Developer",
      title: "Mobile App",
      titleHighlight: "Developer",
      description: "I develop high-performance, user-friendly mobile applications for iOS and Android. I turn your dream app into reality with Flutter.",
      viewProjects: "View My Projects",
      viewBlog: "My Blog Posts",
      scroll: "Scroll",
      scrollTop: "Top",
      stats: {
        projects: "Projects",
        years: "Years",
        technologies: "Technologies",
      },
    },
    stats: {
      projects: "Applications Developed",
      experience: "Years of Experience",
      blogPosts: "Blog Posts",
      technologies: "Technologies Used",
    },
    about: {
      badge: "About Me",
      title: "Hello, I'm Furkan Olkay",
      description: "I'm a Software Engineer, Mobile Team Lead, and Flutter Developer with 5+ years of experience. I develop high-performance, user-friendly mobile applications for iOS and Android. I'm specialized in the Flutter ecosystem and develop projects with modern software architectures and best practices.",
    },
    experience: {
      badge: "My Career Journey",
      title: "My Experience",
      description: "5+ years of professional Flutter development experience",
      current: "Present",
      jobs: {
        senior: {
          title: "Senior Flutter Developer / Mobile Team Lead",
          company: "TechCorp Inc.",
          period: "2022 - Present",
          description: "Developing enterprise-level mobile applications, team leadership, and architectural decision-making. Project management with Clean Architecture and SOLID principles.",
        },
        mid: {
          title: "Flutter Developer",
          company: "StartupHub",
          period: "2020 - 2022",
          description: "Development of e-commerce and fintech applications. REST API integrations, state management implementation, and performance optimization.",
        },
        junior: {
          title: "Mobile App Developer",
          company: "Digital Solutions",
          period: "2019 - 2020",
          description: "Developing custom mobile application solutions for clients from various industries. UI/UX design implementation and user experience improvements.",
        },
      },
    },
    skills: {
      badge: "Technical Skills",
      title: "My Expertise Areas",
      description: "Skills I've developed with modern technologies and best practices",
      tools: "Tools & Technologies",
    },
    projects: {
      badge: "Featured Projects",
      title: "My Projects",
      description: "High-performance mobile applications I've developed in recent years",
      viewAll: "View All Projects →",
      pageTitle: "My Projects",
      pageDescription: "A collection of mobile applications and software projects I've developed with Flutter.",
      viewDetails: "View Details",
      noProjects: "No projects found yet.",
    },
    blog: {
      badge: "Latest Posts",
      title: "My Blog Posts",
      description: "Articles about Flutter, mobile development, and software engineering",
      viewAll: "View All Posts →",
      backToBlog: "Back to Blog",
      postBadge: "Blog Post",
      backToHome: "Home",
      months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
    },
    contact: {
      badge: "Contact",
      title: "Let's Work Together",
      description: "Get in touch with me for your project. I'm here for any questions!",
      contactInfo: "Contact Information",
      email: "Email",
      linkedin: "LinkedIn",
      location: "Location",
      locationValue: "Istanbul, Turkey",
      availability: "Available for New Projects",
      availabilityDesc: "I'm open to freelance projects and long-term collaborations.",
      form: {
        name: "Your Name",
        namePlaceholder: "Full Name",
        email: "Your Email",
        emailPlaceholder: "example@email.com",
        message: "Your Message",
        messagePlaceholder: "Share details about your project...",
        submit: "Send Message",
        success: "Your message has been sent successfully! I'll get back to you as soon as possible.",
      },
    },
    footer: {
      description: "I develop high-performance mobile applications for iOS and Android with 5+ years of experience.",
      quickLinks: "Quick Links",
      contact: "Contact",
      rights: "All rights reserved.",
    },
    vibe: {
      badge: "Vibe Coding",
      title: "Staying Up-to-Date",
      description: "I code with the latest technologies and trends. Learning something new every day, developing with modern tools.",
      commits: "Git Commits",
      packages: "Packages Explored",
      projects: "Side Projects",
    },
  },
  tr: {
    nav: {
      home: "Ana Sayfa",
      about: "Hakkımda",
      experience: "Deneyim",
      skills: "Yetenekler",
      projects: "Projeler",
      contact: "İletişime Geç",
    },
    hero: {
      badge: "5+ Yıl Deneyimli Flutter Developer",
      title: "Mobil Uygulama",
      titleHighlight: "Geliştiricisi",
      description: "iOS ve Android için yüksek performanslı, kullanıcı dostu mobil uygulamalar geliştiriyorum. Flutter ile hayalinizdeki uygulamayı gerçeğe dönüştürüyorum.",
      viewProjects: "Projelerimi İncele",
      viewBlog: "Blog Yazılarım",
      scroll: "Kaydır",
      scrollTop: "Yukarı",
      stats: {
        projects: "Projeler",
        years: "Yıl",
        technologies: "Teknolojiler",
      },
    },
    stats: {
      projects: "Geliştirilen Uygulama",
      experience: "Yıllık Deneyim",
      blogPosts: "Blog Yazıları",
      technologies: "Kullanılan Teknoloji",
    },
    about: {
      badge: "Hakkımda",
      title: "Merhaba, Ben Furkan Olkay",
      description: "Software Engineer, Mobile Team Lead ve Flutter Developer olarak 5+ yıllık deneyime sahibim. iOS ve Android için yüksek performanslı, kullanıcı dostu mobil uygulamalar geliştiriyorum. Flutter ekosisteminde uzmanlaşmış olup, modern yazılım mimarileri ve best practices ile projeler geliştiriyorum.",
    },
    experience: {
      badge: "Kariyer Yolculuğum",
      title: "Deneyimlerim",
      description: "5+ yıllık profesyonel Flutter development deneyimim",
      current: "Şu an",
      jobs: {
        senior: {
          title: "Senior Flutter Developer / Mobile Team Lead",
          company: "TechCorp Inc.",
          period: "2022 - Şu an",
          description: "Enterprise seviye mobil uygulamalar geliştirme, takım liderliği ve mimari kararların alınması. Clean Architecture ve SOLID prensipleri ile proje yönetimi.",
        },
        mid: {
          title: "Flutter Developer",
          company: "StartupHub",
          period: "2020 - 2022",
          description: "E-ticaret ve fintech uygulamalarının geliştirilmesi. REST API entegrasyonları, state management implementasyonu ve performans optimizasyonu.",
        },
        junior: {
          title: "Mobile App Developer",
          company: "Digital Solutions",
          period: "2019 - 2020",
          description: "Çeşitli sektörlerden müşteriler için özel mobil uygulama çözümleri geliştirme. UI/UX tasarım implementasyonu ve kullanıcı deneyimi iyileştirmeleri.",
        },
      },
    },
    skills: {
      badge: "Teknik Yetenekler",
      title: "Uzmanlık Alanlarım",
      description: "Modern teknolojiler ve best practices ile geliştirdiğim beceriler",
      tools: "Araçlar & Teknolojiler",
    },
    projects: {
      badge: "Öne Çıkan İşlerim",
      title: "Projelerim",
      description: "Son yıllarda geliştirdiğim yüksek performanslı mobil uygulamalar",
      viewAll: "Tüm Projeleri Gör →",
      pageTitle: "Projelerim",
      pageDescription: "Flutter ile geliştirdiğim mobil uygulamalar ve yazılım projeleri koleksiyonum.",
      viewDetails: "Detayları Gör",
      noProjects: "Henüz proje bulunmamaktadır.",
    },
    blog: {
      badge: "Son Yazılarım",
      title: "Blog Yazılarım",
      description: "Flutter, mobil geliştirme ve yazılım mühendisliği hakkında yazılarım",
      viewAll: "Tüm Yazıları Gör →",
      backToBlog: "Blog'a Dön",
      postBadge: "Blog Yazısı",
      backToHome: "Ana Sayfa",
      months: ["Ocak", "Şubat", "Mart", "Nisan", "Mayıs", "Haziran", "Temmuz", "Ağustos", "Eylül", "Ekim", "Kasım", "Aralık"],
    },
    contact: {
      badge: "İletişim",
      title: "Birlikte Çalışalım",
      description: "Projeniz için benimle iletişime geçin. Her türlü sorunuz için buradayım!",
      contactInfo: "İletişim Bilgileri",
      email: "Email",
      linkedin: "LinkedIn",
      location: "Lokasyon",
      locationValue: "İstanbul, Türkiye",
      availability: "Yeni Projeler İçin Müsaitim",
      availabilityDesc: "Freelance projelere ve uzun dönemli işbirliklerine açığım.",
      form: {
        name: "Adınız Soyadınız",
        namePlaceholder: "Ad Soyad",
        email: "Email Adresiniz",
        emailPlaceholder: "ornek@email.com",
        message: "Mesajınız",
        messagePlaceholder: "Projeniz hakkında detayları paylaşın...",
        submit: "Mesaj Gönder",
        success: "Mesajınız başarıyla gönderildi! En kısa sürede dönüş yapacağım.",
      },
    },
    footer: {
      description: "5+ yıllık deneyimle iOS ve Android için yüksek performanslı mobil uygulamalar geliştiriyorum.",
      quickLinks: "Hızlı Erişim",
      contact: "İletişim",
      rights: "Tüm hakları saklıdır.",
    },
    vibe: {
      badge: "Vibe Coding",
      title: "Yenilikleri Takip Ediyorum",
      description: "En son teknolojiler ve trendlerle kod yazıyorum. Her gün yeni bir şey öğreniyor, modern araçlarla geliştirme yapıyorum.",
      commits: "Git Commit'leri",
      packages: "Keşfedilen Paketler",
      projects: "Yan Projeler",
    },
  },
};

let currentLanguage = 'en';

function detectLanguage() {
  // Check localStorage first
  const savedLang = localStorage.getItem('language');
  if (savedLang && (savedLang === 'en' || savedLang === 'tr')) {
    return savedLang;
  }

  // Default to English (no browser language detection)
  return 'en';
}

function t(key) {
  const keys = key.split('.');
  let value = translations[currentLanguage];
  
  for (const k of keys) {
    if (value && typeof value === 'object' && k in value) {
      value = value[k];
    } else {
      return key; // Return key if translation not found
    }
  }
  
  return typeof value === 'string' ? value : key;
}

function setLanguage(lang) {
  currentLanguage = lang;
  localStorage.setItem('language', lang);
  document.documentElement.lang = lang;
  updatePageContent();
}

function updatePageContent() {
  // Update all elements with data-i18n attribute
  document.querySelectorAll('[data-i18n]').forEach((element) => {
    const key = element.getAttribute('data-i18n');
    if (key) {
      const translation = t(key);
      if (element instanceof HTMLInputElement || element instanceof HTMLTextAreaElement) {
        if (element.hasAttribute('placeholder')) {
          element.placeholder = translation;
        } else {
          element.value = translation;
        }
      } else if (element instanceof HTMLLabelElement) {
        element.textContent = translation;
      } else if (element.tagName === 'SPAN') {
        // For span elements, update textContent directly (preserves other sibling elements)
        element.textContent = translation;
      } else {
        // For other elements (a, button, etc), update textContent directly
        // This will replace all content, so make sure data-i18n is on the right element
        element.textContent = translation;
      }
    }
  });

  // Update placeholder attributes
  document.querySelectorAll('[data-i18n-placeholder]').forEach((element) => {
    const key = element.getAttribute('data-i18n-placeholder');
    if (key && (element instanceof HTMLInputElement || element instanceof HTMLTextAreaElement)) {
      element.placeholder = t(key);
    }
  });

  // Update HTML lang attribute
  document.documentElement.lang = currentLanguage;
  
  // Trigger custom event for components that need to update
  window.dispatchEvent(new CustomEvent('languagechange', { detail: { language: currentLanguage } }));
}

// Initialize immediately
function initI18n() {
  currentLanguage = detectLanguage();
  document.documentElement.lang = currentLanguage;
  
  // Update content immediately
  updatePageContent();
  
  // Update content multiple times to ensure all elements are translated
  const updateContent = () => {
    updatePageContent();
    // Update again after a short delay to catch any dynamically loaded content
    setTimeout(updatePageContent, 100);
    setTimeout(updatePageContent, 300);
  };
  
  // Update content when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
      updateContent();
    });
  } else {
    updateContent();
  }
}

// Set language immediately before DOM is ready
currentLanguage = detectLanguage();
if (typeof document !== 'undefined') {
  document.documentElement.lang = currentLanguage;
}

// Run initialization
if (typeof document !== 'undefined') {
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initI18n);
  } else {
    initI18n();
  }

  // Also update on window load as a fallback
  window.addEventListener('load', () => {
    setTimeout(updatePageContent, 50);
  });
}

// Make functions available globally
window.i18n = {
  setLanguage,
  getLanguage: () => currentLanguage,
  t,
  updatePageContent,
};

